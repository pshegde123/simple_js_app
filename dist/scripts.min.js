var pokemonRepository = (function () {
  let t = [],
    e = [];
  function n() {
    return t;
  }
  function a() {
    return e;
  }
  function i(e) {
    t.push(e);
  }
  function s(t) {
    e.push(t);
  }
  async function l(t) {
    return fetch(t)
      .then(function (t) {
        return t.json();
      })
      .then(function (t) {
        console.log(t),
          t.abilities.forEach(function (t) {
            s({ name: t.ability.name });
          });
      })
      .catch(function (t) {
        console.error(t);
      });
  }
  function d(t, n, a, i, s) {
    let d = document.querySelector(".modal-dialog"),
      o = document.createElement("div");
    o.classList.add("modal-content"),
      o.setAttribute("id", t),
      o.setAttribute("style", "text-align:center");
    let r = document.createElement("div");
    r.classList.add("modal-header"), r.classList.add("bg-warning");
    let c = document.createElement("h1");
    c.classList.add("modal-title"),
      c.classList.add("fs-5"),
      c.setAttribute("id", "modalLabel"),
      (c.innerHTML = "<span>" + t + "</span>"),
      r.append(c);
    let u = document.createElement("button");
    u.classList.add("btn-close"),
      u.setAttribute("type", "button"),
      u.setAttribute("data-bs-dismiss", "modal"),
      u.setAttribute("onclick", "hideModal()"),
      u.setAttribute("aria-label", "Close"),
      r.append(u),
      o.append(r);
    let p = document.createElement("div");
    p.classList.add("modal-body"), document.createElement("div");
    let m = document.createElement("img");
    m.setAttribute("src", i);
    let b = document.createElement("p");
    (b.innerHTML = "<p>Height: " + n + "ft, Weight: " + a + " lbs</p>"),
      l(s),
      document.createElement("div"),
      console.log("test = ", e.name),
      p.append(m),
      p.append(b),
      o.append(p);
    let f = document.createElement("div");
    f.classList.add("modal-footer");
    let h = document.createElement("button"),
      L = document.createElement("button");
    h.classList.add("btn"),
      h.classList.add("btn-secondary"),
      h.setAttribute("type", "button"),
      h.setAttribute("data-bs-dismiss", "modal"),
      h.setAttribute("onclick", "hideModal()"),
      (h.innerHTML = "<span>Close</span>"),
      L.classList.add("btn"),
      L.classList.add("btn-primary"),
      (L.innerHTML = "<span>Save Changes</span>"),
      d.append(o),
      o.append(f),
      f.append(h),
      f.append(L);
  }
  function o() {
    let t = document.querySelector(".container"),
      e = document.createElement("div");
    e.classList.add("loader"),
      (e.innerHTML = "<p>Loading API data..........</p>"),
      t.appendChild(e);
  }
  function r() {
    let t = document.querySelector(".container"),
      e = document.querySelector(".loader");
    t.removeChild(e);
  }
  async function c() {
    return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150")
      .then(function (t) {
        return t.json();
      })
      .then(function (t) {
        t.results.forEach(function (t) {
          i({ name: t.name, detailsUrl: t.url });
        });
      })
      .catch(function (t) {
        console.error(t);
      });
  }
  function u(t) {
    return fetch(t.detailsUrl)
      .then(function (t) {
        return t.json();
      })
      .then(function (e) {
        (t.imageUrl = e.sprites.front_default),
          (t.height = e.height),
          (t.weight = e.weight);
      })
      .catch(function (t) {
        console.error(t);
      });
  }
  return {
    getAll: n,
    add: i,
    addAbilities: s,
    filterByName: function e(n) {
      return t.filter((t) => "Pikachu" === t.name);
    },
    addListItem: function t(e) {
      let n = document.createElement("div");
      n.classList.add("d-grid"),
        n.classList.add("gap-2"),
        n.classList.add("col-6"),
        n.classList.add("mx-auto");
      let a = document.querySelector(".list-group"),
        i = document.createElement("li");
      i.classList.add("list-group-item"),
        i.classList.add("border-0"),
        i.classList.add("text-center");
      let s = document.createElement("button"),
        l = "<p>" + e.name + "</p>";
      (s.innerHTML = l),
        s.classList.add("pokemonButton"),
        s.classList.add("btn"),
        s.classList.add("btn-outline-dark"),
        s.classList.add("shadow-lg"),
        s.setAttribute("type", "button"),
        s.setAttribute("style", "border:double"),
        s.setAttribute("data-toggle", "button"),
        s.setAttribute("data-bs-toggle", "modal"),
        s.setAttribute("data-bs-target", "#pokeDetails"),
        (function t(e, n) {
          e.addEventListener("click", function () {
            !(function t(e) {
              u(e).then(function () {
                d(e.name, e.height, e.weight, e.imageUrl, e.detailsUrl);
              });
            })(n);
          });
        })(s, e),
        i.append(s),
        a.append(i);
    },
    loadList: c,
    loadAbilityList: l,
    loadDetails: u,
    showModal: d,
    getAllAbilities: a,
  };
})();
(window.hideModal = function () {
  let t = document.querySelector(".modal-dialog"),
    e = document.querySelector(".modal-content");
  t.removeChild(e);
}),
  pokemonRepository.loadList().then(function () {
    pokemonRepository.getAll().forEach(function (t) {
      pokemonRepository.addListItem(t);
    });
  });
